{"version":3,"file":"static/js/458.e9803e8b.chunk.js","mappings":"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","sources":["pages/Live/Details.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Grid, Typography, useMediaQuery } from \"@mui/material\";\nimport { Box, Container, useTheme } from \"@mui/system\";\nimport img from \"../../assets/images/forViever.svg\";\n// eslint-disable-next-line no-unused-vars\nimport { Fancybox } from \"@fancyapps/ui\";\nimport { useParams } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getStreamDetails } from \"../../redux/reducers/streams.js\";\nimport Chat from \"./Chat\";\nimport ReactHlsPlayer from \"react-hls-player/dist\";\nimport { Link } from \"react-router-dom\";\n\nconst LiveDetails = ({ t }) => {\n  const dispatch = useDispatch();\n\n  const { id } = useParams();\n  const { stream_details } = useSelector(({ streams }) => streams);\n\n  const [chat, setChat] = useState([]);\n  const [started, setStarted] = useState(false);\n  const ws = useRef();\n\n  const theme = useTheme();\n  const md = useMediaQuery(theme.breakpoints.down(\"768\"));\n\n  const details = stream_details?.details;\n\n  useEffect(() => {\n    dispatch(getStreamDetails(id));\n  }, []);\n\n  useEffect(() => {\n    if (stream_details?.details?.title)\n      document.title = `Прямой эфир ${stream_details?.details?.title} на Электроника сервис `;\n    if (details?.play_url)\n      fetch(details?.play_url).then((res) => {\n        if (res.status === 404) setStarted(false);\n        else setStarted(true);\n      });\n  }, [stream_details]);\n\n  return (\n    <section>\n      <Container\n        maxWidth=\"xl\"\n        sx={{\n          p: { xs: \"0!important\" },\n        }}\n      >\n        {!md && (\n          <Box borderBottom=\"1px solid #00000010\" pb={3} mb={3}>\n            <div className=\"d-flex\">\n              <img\n                src={details?.creator?.avatar}\n                width=\"47\"\n                height=\"47\"\n                style={{ borderRadius: \"100%\" }}\n                alt=\"\"\n              />\n              <Typography ml={2} variant=\"body2\">\n                {details?.creator?.full_name}\n              </Typography>\n            </div>\n            <Typography\n              variant=\"h5\"\n              mt={2}\n              mb={2}\n              fontWeight=\"700\"\n              lineHeight=\"29px\"\n            >\n              {details?.title}\n            </Typography>\n            <Typography variant=\"body2\" lineHeight=\"150%\" fontWeight=\"400\">\n              {details?.description}\n            </Typography>\n          </Box>\n        )}\n        <Grid container spacing={{ xs: 0, md: 3 }}>\n          {!md && (\n            <Grid\n              item\n              xs={12}\n              md={4}\n              display=\"flex\"\n              flexDirection=\"column\"\n              rowGap=\"16px\"\n              sx={{\n                maxHeight: \"716px\",\n              }}\n              overflow=\"auto\"\n            >\n              <Box\n                display=\"flex\"\n                justifyContent=\"center\"\n                flexDirection=\"column\"\n                alignItems=\"center\"\n              >\n                <Typography variant=\"body2\" fontWeight=\"700\" mb={2}>\n                  {details?.products_count} товаров на стриме\n                </Typography>\n                <div className=\"d-flex\">\n                  <svg\n                    width=\"23\"\n                    height=\"24\"\n                    viewBox=\"0 0 23 24\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M11.5 0.375C13.1172 0.375 14.5547 1.31836 15.2734 2.71094C16.7559 2.2168 18.418 2.57617 19.6309 3.74414C20.7988 4.91211 21.1133 6.61914 20.6641 8.10156C22.0566 8.82031 23 10.2578 23 11.875C23 13.5371 22.0566 14.9746 20.6641 15.6934C21.1582 17.1758 20.7988 18.8379 19.6309 20.0059C18.418 21.1738 16.7559 21.5332 15.2734 21.084C14.5547 22.4766 13.1172 23.375 11.5 23.375C9.83789 23.375 8.40039 22.4766 7.68164 21.084C6.19922 21.5332 4.53711 21.1738 3.32422 20.0059C2.15625 18.8379 1.8418 17.1758 2.29102 15.6934C0.898438 14.9746 0 13.5371 0 11.875C0 10.2578 0.898438 8.82031 2.29102 8.10156C1.79688 6.61914 2.15625 4.91211 3.32422 3.74414C4.53711 2.57617 6.19922 2.2168 7.68164 2.71094C8.40039 1.31836 9.83789 0.375 11.5 0.375ZM8.625 10.4375C9.38867 10.4375 10.0625 9.80859 10.0625 9C10.0625 8.23633 9.38867 7.5625 8.625 7.5625C7.81641 7.5625 7.1875 8.23633 7.1875 9C7.1875 9.80859 7.81641 10.4375 8.625 10.4375ZM14.375 13.3125C13.5664 13.3125 12.9375 13.9863 12.9375 14.75C12.9375 15.5586 13.5664 16.1875 14.375 16.1875C15.1387 16.1875 15.8125 15.5586 15.8125 14.75C15.8125 13.9863 15.1387 13.3125 14.375 13.3125ZM15.0938 9.76367C15.543 9.35938 15.543 8.68555 15.0938 8.23633C14.6895 7.83203 14.0156 7.83203 13.6113 8.23633L7.86133 13.9863C7.41211 14.4355 7.41211 15.1094 7.86133 15.5137C8.26562 15.9629 8.93945 15.9629 9.34375 15.5137L15.0938 9.76367Z\"\n                      fill=\"#8C8C8C\"\n                    />\n                  </svg>\n                  <Typography\n                    fontSize=\"12px\"\n                    maxWidth=\"175px\"\n                    lineHeight=\"15px\"\n                    color=\"#8C8C8C\"\n                    ml={1}\n                  >\n                    Скидки на товары действуют только для зрителей эфира.\n                  </Typography>\n                </div>\n              </Box>\n              {details?.products?.map((item, idx) => (\n                <Product item={item} id={details?.id} key={idx} />\n              ))}\n            </Grid>\n          )}\n          <Grid\n            item\n            xs={12}\n            md={4}\n            sx={{\n              \"& video\": {\n                height: { xs: \"100vh\", md: \"100%\" },\n              },\n            }}\n          >\n            <Box position=\"relative\" height=\"100%\">\n              {!started && (\n                <Box\n                  component=\"img\"\n                  sx={{\n                    position: \"absolute\",\n                    top: 0,\n                    left: 0,\n                    height: { xs: \"100vh\", md: \"100%\" },\n                    width: \"100%\",\n                    objectFit: \"cover\",\n                    zIndex: 2,\n                    borderRadius: \"16px\",\n                  }}\n                  src={details?.announcement_photo}\n                  alt=\"\"\n                />\n              )}\n              <ReactHlsPlayer\n                disablePictureInPicture\n                src={details?.play_url}\n                autoPlay\n                muted\n                controls\n                loop\n                style={{\n                  objectFit: \"cover\",\n                  borderRadius: md ? 0 : \"16px\",\n                }}\n                width=\"100%\"\n              />\n            </Box>\n\n            {md && <Chat t={t} ws={ws} details={stream_details?.details} />}\n          </Grid>\n          {!md && (\n            <Grid item xs={12} md={4}>\n              {details?.chat_room_name ? (\n                <Chat\n                  setChat={setChat}\n                  chat={chat}\n                  ws={ws}\n                  details={stream_details?.details}\n                />\n              ) : null}\n            </Grid>\n          )}\n        </Grid>\n      </Container>\n    </section>\n  );\n};\n\nexport default LiveDetails;\n\nconst Product = ({ item, id }) => {\n  const variant = item?.product_variation;\n  const newPrice = variant?.product_price;\n  const price = !variant?.is_promotion\n    ? variant?.product_price\n    : variant?.promotion_price;\n  return (\n    <Box\n      sx={{\n        background: \"#FFFFFF\",\n        border: \"1px solid #C3C3C3\",\n        borderRadius: 1,\n      }}\n    >\n      <Link\n        style={{ display: \"flex\" }}\n        to={`/details/${item.id}?from_live=${id}`}\n      >\n        <img\n          src={variant.images[0].image}\n          style={{ objectFit: \"cover\" }}\n          width=\"216\"\n          height=\"162\"\n          alt=\"\"\n        />\n        <Box\n          width=\"60%\"\n          p=\"12px\"\n          flexDirection=\"column\"\n          display=\"flex\"\n          justifyContent=\"space-between\"\n        >\n          <Box display=\"flex\" justifyContent=\"space-between\">\n            <img src={img} style={{ objectFit: \"scale-down\" }} alt=\"\" />\n            {newPrice - price > 0 && (\n              <Box\n                sx={{\n                  padding: \"4px\",\n                  background: \"#CE1A1A\",\n                  borderRadius: \"4px\",\n                }}\n              >\n                <Typography fontSize=\"10px\" color=\"#FFF\">\n                  - {newPrice - price} с\n                </Typography>\n              </Box>\n            )}\n          </Box>\n          <Typography\n            variant=\"body2\"\n            sx={{\n              textOverflow: \"ellipsis\",\n              overflow: \"hidden\",\n              display: \"-webkit-box\",\n              WebkitLineClamp: 1,\n              WebkitBoxOrient: \"vertical\",\n              wordWrap: \"break-word\",\n              textDecoration: \"underline\",\n            }}\n          >\n            {item.title}\n          </Typography>\n          <Typography\n            sx={{\n              textOverflow: \"ellipsis\",\n              overflow: \"hidden\",\n              display: \"-webkit-box\",\n              WebkitLineClamp: 3,\n              WebkitBoxOrient: \"vertical\",\n              wordWrap: \"break-word\",\n            }}\n            variant=\"body2\"\n            color=\"#00000050\"\n          >\n            {item.description}\n          </Typography>\n          <Box display=\"flex\">\n            {variant?.is_promotion && (\n              <Typography\n                mr={2}\n                sx={{\n                  textDecoration: \"line-through\",\n                }}\n                variant=\"body2\"\n              >\n                {newPrice} {variant?.currency_unit}\n              </Typography>\n            )}\n\n            <Typography variant=\"body2\" fontWeight=\"700\" color=\"var(--primary)\">\n              {price} {variant?.currency_unit}\n            </Typography>\n          </Box>\n        </Box>\n      </Link>\n    </Box>\n  );\n};\n"],"names":["t","dispatch","useDispatch","id","useParams","stream_details","useSelector","streams","useState","chat","setChat","started","setStarted","ws","useRef","theme","useTheme","md","useMediaQuery","breakpoints","down","details","useEffect","getStreamDetails","title","document","play_url","fetch","then","res","status","maxWidth","sx","p","xs","borderBottom","pb","mb","className","src","creator","avatar","width","height","style","borderRadius","alt","ml","variant","full_name","mt","fontWeight","lineHeight","description","container","spacing","item","display","flexDirection","rowGap","maxHeight","overflow","justifyContent","alignItems","products_count","viewBox","fill","xmlns","d","fontSize","color","products","map","idx","Product","position","component","top","left","objectFit","zIndex","announcement_photo","disablePictureInPicture","autoPlay","muted","controls","loop","chat_room_name","product_variation","newPrice","product_price","price","is_promotion","promotion_price","background","border","to","images","image","img","padding","textOverflow","WebkitLineClamp","WebkitBoxOrient","wordWrap","textDecoration","mr","currency_unit"],"sourceRoot":""}