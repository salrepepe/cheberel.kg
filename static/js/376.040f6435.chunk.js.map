{"version":3,"file":"static/js/376.040f6435.chunk.js","mappings":"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","sources":["pages/Dashboard/Profile/ChangeNumber/index.jsx"],"sourcesContent":["import {\n  Button,\n  IconButton,\n  InputAdornment,\n  SwipeableDrawer,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { useFormik } from \"formik\";\nimport React, { useRef } from \"react\";\nimport { useLayoutEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CloseIcon } from \"../../../../assets/images/icons\";\nimport { CustomMask } from \"../../../../components/Mask\";\nimport SnackBar from \"../../../../components/SnackBar\";\nimport { sendCode, setCodeRes } from \"../../../../redux/reducers/auth\";\nimport {\n  changePhone,\n  setChangedPhoneData,\n} from \"../../../../redux/reducers/profile\";\n\nconst ChangeNumber = ({ open, setOpen, setLoading, t }) => {\n  const dispatch = useDispatch();\n\n  const { profile, changed_phone_data } = useSelector(({ profile }) => profile);\n  const { code } = useSelector(({ auth }) => auth);\n\n  const formik = useFormik({\n    initialValues: {\n      phone: \"\",\n      new_phone: \"\",\n      code: \"\",\n    },\n    onSubmit: (values) => {\n      // show linear progress\n      setLoading(true);\n\n      if (code.severity === 200) {\n        //remove different characters from phone\n        values.phone = values.phone.replace(/[\\s+().,-]/g, \"\");\n        values.new_phone = values.new_phone.replace(/[\\s+().,-]/g, \"\");\n        dispatch(changePhone(values));\n      } else {\n        dispatch(\n          sendCode({ phone: formik.values.phone.replace(/[\\s+().,-]/g, \"\") })\n        );\n      }\n    },\n  });\n\n  const firstUpdate = useRef(true);\n\n  useLayoutEffect(() => {\n    if (firstUpdate.current) {\n      firstUpdate.current = false;\n      return;\n    }\n\n    // hide linear progress\n    setLoading(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [code]);\n\n  useLayoutEffect(() => {\n    if (firstUpdate.current) {\n      firstUpdate.current = false;\n      return;\n    }\n\n    // hide linear progress\n    setLoading(false);\n\n    if (changed_phone_data.severity === 200 && open) {\n      setOpen(false);\n      // dispatch(setVerifyDialog(true));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [changed_phone_data]);\n\n  return (\n    <>\n      <SnackBar\n        txt=\"Ваш номер телефона был успешно изменен\"\n        state={changed_phone_data}\n        setState={setChangedPhoneData}\n      />\n      <SnackBar\n        txt=\"Код отправлен на ваш номер телефона\"\n        state={code}\n        setState={setCodeRes}\n      />\n      <SwipeableDrawer\n        anchor=\"right\"\n        sx={{\n          \"& .MuiPaper-root\": {\n            width: { xs: \"100%\", lg: \"30%\" },\n            p: 2,\n          },\n        }}\n        open={open}\n        onOpen={() => setOpen(true)}\n        onClose={() => setOpen(false)}\n      >\n        <Box display=\"flex\" mb={3} justifyContent=\"space-between\">\n          <Typography variant=\"h6\" fontWeight=\"700\">\n            {t(\"changePhone\")}{\" \"}\n          </Typography>\n          <IconButton onClick={() => setOpen(false)}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n        <Box\n          display=\"flex\"\n          flexDirection=\"column\"\n          alignItems=\"space-between\"\n          justifyContent=\"space-between\"\n          height=\"100%\"\n          component=\"form\"\n          onSubmit={formik.handleSubmit}\n        >\n          <Box\n            sx={{\n              \"& .MuiFormControl-root\": {\n                boxShadow: \"none!important\",\n                borderRadius: 8,\n\n                \"& .MuiOutlinedInput-notchedOutline\": {\n                  borderColor: \"#CECECE\",\n                },\n              },\n            }}\n          >\n            <TextField\n              required\n              disabled\n              fullWidth\n              name=\"phone\"\n              onChange={formik.handleChange}\n              value={profile.phone_number}\n              id=\"+996 (000) 00 00 00\"\n              InputProps={{\n                inputComponent: CustomMask,\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    {t(\"fromNumber\")}:\n                  </InputAdornment>\n                ),\n              }}\n            />\n            <TextField\n              required\n              sx={{ mt: 3, mb: 2 }}\n              fullWidth\n              name=\"new_phone\"\n              value={formik.values.new_phone}\n              onChange={formik.handleChange}\n              id=\"+996 (000) 00 00 00\"\n              InputProps={{\n                inputComponent: CustomMask,\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    {t(\"toNumber\")}:\n                  </InputAdornment>\n                ),\n              }}\n            />\n\n            {code?.severity === 200 && (\n              <>\n                <Typography\n                  fontSize=\"12px\"\n                  mt={3}\n                  mb={1}\n                  textTransform=\"uppercase\"\n                  color=\"#000\"\n                >\n                  Код подтверждения\n                </Typography>\n                <TextField\n                  required\n                  sx={{ display: \"flex\", justifyContent: \"center\" }}\n                  fullWidth\n                  value={formik.values.code}\n                  onChange={formik.handleChange}\n                  name=\"code\"\n                />\n              </>\n            )}\n          </Box>\n          <Button\n            size=\"medium\"\n            type=\"submit\"\n            color=\"primary\"\n            fullWidth\n            variant=\"contained\"\n          >\n            {code?.severity === 200 ? t(\"save\") : t(\"change\")}\n          </Button>\n        </Box>\n      </SwipeableDrawer>\n    </>\n  );\n};\n\nexport default ChangeNumber;\n"],"names":["open","setOpen","setLoading","t","dispatch","useDispatch","useSelector","profile","changed_phone_data","code","auth","formik","useFormik","initialValues","phone","new_phone","onSubmit","values","severity","replace","changePhone","sendCode","firstUpdate","useRef","useLayoutEffect","current","txt","state","setState","setChangedPhoneData","setCodeRes","anchor","sx","width","xs","lg","p","onOpen","onClose","display","mb","justifyContent","variant","fontWeight","onClick","flexDirection","alignItems","height","component","handleSubmit","boxShadow","borderRadius","borderColor","required","disabled","fullWidth","name","onChange","handleChange","value","phone_number","id","InputProps","inputComponent","CustomMask","startAdornment","position","mt","fontSize","textTransform","color","size","type"],"sourceRoot":""}